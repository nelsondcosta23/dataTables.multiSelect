/*! DataTables MultiSelect integration
 * 
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","datatables.net","vendors/bootstrap-multiselect"],function(b){return a(b,window,document)}):a(jQuery,window,document)}(function(a,b,c,d){"use strict";var e=a.fn.dataTable,f=function(b,c,d,e){this.instance=b,this.index=d,this.column=c,this.options=a.extend(g.defaults.defaultMultiSelectOptions,e),this.isChanging=!1,this.seachList=[""],this._constructor(),this.search=function(){var a=this._getSearchText();return""==a||null==a?f.last=null:f.last=this,this.column.search(a,!0,!1).draw(),a},this.update=function(){this._update()}};f.last=null,f.prototype={_constructor:function(){this.instance.multiselect(this.options),this.instance.on("change",function(){this.search()}.bind(this))},_getSearchText:function(){var b=this._getSearchList(),c="";if(null!=b){for(var d=0;d<b.length;d++)b[d]=a.fn.dataTable.util.escapeRegex(b[d]),b[d]=""!=b[d]?"("+b[d]+")":"";c=b.join("|")}return c},_getSearchList:function(){return this.instance.val()},_update:function(){if(f.last!=this){var b=this.instance;b.empty();var c=this.column.search().split("|").map(function(a){var b=/\\/gi;return a=a.replace(b,""),a.replace(/\((.*)\)/g,"$1")});this.column.data().unique().each(function(a){if(""!=a){var d=c.indexOf(a.toString()),e=d!=-1?"selected":"";b.append('<option value="'+a+'" '+e+">"+a+"</option>"),d!=-1&&c.splice(d,1)}}),a.each(c,function(a,c){""!=c&&b.append('<option value="'+c+'" selected>'+c+"</option>")}),b.multiselect("rebuild")}}};var g=function(b,c){if(!e.versionCheck||!e.versionCheck("1.10.1"))throw"DataTables MutiSelect requires DataTables 1.10.1 or newer";this.options=a.extend(g.defaults,c),this.s={dt:new a.fn.dataTable.Api(b),columns:[]},b.multiSelectApi=this,this._constructor()};return g.prototype={_constructor:function(){var a=this;a.sInstance=a.s.dt.context[0].sInstance,a.components={},a._init(),this.s.dt.on("draw.dt",function(b,c){a.s.recordsDisplay!=c.fnRecordsDisplay()&&a._draw(),a.s.recordsDisplay=c.fnRecordsDisplay()}),a._draw()},_init:function(){var b=this;this.s.recordsDisplay=0,this.s.dt.columns().eq(0).each(function(c,d){var e=b._getMultiSelectOption(d,"selector"),g=b._getMultiSelectOption(d),h=a(e?e:"#"+b.sInstance+"-quick-filter-"+d);h.length>0&&(b.components[d]=new f(h,b.s.dt.column(d,{filter:"applied"}),d,g))})},_draw:function(){this._updateComponents()},_updateComponents:function(){for(var a in this.components)this.components[a].update()},_getOption:function(a,b){return null==this.options||null==this.options[a]?b:this.options[a]},_getMultiSelectOption:function(a,b){var c=this._getOption("multiSelectOptions"),d=null;if(!c)return null;for(var e=0;e<c.length;e++)c[e]&&null!=c[e].col&&c[e].col==a&&(d=c[e]);return b?d&&d[b]?d[b]:null:d}},g.defaults={multiSelectOptions:null,defaultMultiSelectOptions:{onDropdownShow:function(){},onDropdownHidden:function(){}}},a(c).on("init.dt.dtr",function(a,b,c){new g(b,b.oInit.multiSelect)}),g});